<!DOCTYPE html>
<html lang="es-ES">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | {{ user["nombre"] }}</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cuenta.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@0.11.3/dist/tippy.css">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/magnific-popup.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min.js"></script>

    <link rel="stylesheet" type="text/css"
        href="{{ url_for('static', filename='vendor/notiflix/notiflix-2.7.0.min.css') }}">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body
    style="display: flex; font-family: Avenir Next,Helvetica Neue,Arial,sans-serif!important; font-feature-settings: 'kern','liga','pnum'; -webkit-font-smoothing: antialiased;">
    <style>
        a:hover {
            text-decoration: none;
        }
    </style>
    <div style="position: relative;" class="sideNav">
        <div class="logo">
            <a href="/?r=true">
                <img src="{{ url_for('static', filename='images/favicon.png') }}" alt="LOGO">
            </a>
        </div>
        <ul>
            <a href="/dashboard/host" class="tippy" title="Mira tus hosts" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="HostUsuario"><i
                    style="color: rgb(255, 173, 40); margin-right: 10px;" class="fas fa-cloud-upload-alt"></i> 0 </a>
            <a href="{{ docs }}" target="_blank" class="tippy" title="Recibir ayuda" data-duration="300"
                data-arrow="false" data-animation="shift" data-position="right" id="help"><i
                    class="far fa-life-ring"></i></a>
            <a href="/dashboard/edit" class="tippy" title="Editar perfil" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="edit"><i class="fas fa-cog"></i></a>
            <a href="/dashboard" class="tippy" title="Pagina principal" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="edit"><i class="fas fa-home"></i></a>
        </ul>
    </div>
    <div class="wrapper__navy">
        <div class="navy">
            <a href="/dashboard/edit" class="acc">
                <div class="pfp">
                    <style>
                        #pfpHolderNavy {
                            background-image: url("{{ user['pfp'] }}");
                            background-size: cover;
                            background-position: center;
                            width: 44px;
                            height: 44px;
                            border-radius: 50%;
                        }
                    </style>
                    <div id="pfpHolderNavy"></div>
                </div>
                <div class="info">
                    <div class="nm">
                        {{ user['nombre'] }}
                    </div>
                    <div class="mail">
                        {{ user['mail'] }}
                    </div>
                </div>
            </a>
        </div>
        <style>
            .pagina {
                margin: 100px 0;
                height: auto;
            }
        </style>
        <div class="pagina" style="flex-direction: column;">
            <div class="edit__box">
                <div class="headder">
                    <div class="logo">
                        <i class="far fa-plus-square"></i>
                    </div>
                    <div class="info">
                        <div class="title">
                            Crear un nuevo host
                        </div>
                        <div class="desc">
                            Create un host rapido y sencillo
                        </div>
                    </div>
                </div>
                <div class="wrapper">
                    <script>
                        const nombre_y_mail = ["{{ user['mail'] }}", "{{ user['nombre'] }}"]
                        const git_name = "{{ info_github['login'] }}"
                    </script>
                    <div id="form">
                        <style>
                            .repoUrl {
                                width: 100%;
                            }
                        </style>
                        <div class="repoUrl">
                            <div id="noSeQuePonerAquiXdNecesitoSugerencias" class="container my-5">
                                <style>
                                    .hide {
                                        display: none;
                                    }

                                    #list {
                                        overflow-y: auto;
                                        overflow-x: hidden;
                                        text-overflow: ellipsis;
                                        width: 100%;
                                        max-height: 295px;
                                        border: 1px solid #ddd;
                                        border-radius: 10px;
                                        border-top-left-radius: 0;
                                        border-top-right-radius: 0;
                                        position: absolute;
                                        padding: 10px;
                                        background: #fff;
                                    }

                                    #inputrepo {
                                        height: 100%;
                                        padding: 10px 0;
                                        outline: none;
                                        border: none;
                                        width: 500px;
                                    }

                                    @media only screen and (max-width: 1400px) {
                                        #inputrepo {
                                            width: 255px;
                                        }

                                        #noSeQuePonerAquiXdNecesitoSugerencias {
                                            margin-top: 0 !important;
                                        }
                                    }

                                    #inputrepo:focus {
                                        outline: none !important;
                                        border: none !important;
                                        box-shadow: none !important;
                                    }

                                    .inputy {
                                        border: 1px solid #ddd;
                                        position: relative;
                                        /* justify-content: center; */
                                        /* align-items: center; */
                                        display: grid;
                                        grid-template-columns: auto auto auto;
                                        justify-content: center;
                                        align-items: center;
                                        width: 100%;
                                        margin: 0;
                                    }

                                    .inputy label {
                                        margin: auto 10px;
                                        width: 30px;
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        font-size: 20px;
                                        cursor: pointer;
                                    }

                                    #dropyIcon {
                                        transform: rotate(0deg);
                                    }

                                    #dropyIcon.up {
                                        transform: rotate(180deg);
                                    }

                                    #list::-webkit-scrollbar-track {
                                        background-color: #F5F5F5;
                                    }

                                    #list::-webkit-scrollbar {
                                        width: 12px;
                                        background-color: #F5F5F5;
                                    }

                                    #list::-webkit-scrollbar-thumb {
                                        border-radius: 1px;
                                        background-color: rgb(182, 179, 179);
                                    }

                                    .list-group-item {
                                        border: none;
                                        border-radius: 5px;
                                    }

                                    .list-group-item:hover {
                                        cursor: pointer;
                                        background: #ddd;
                                    }

                                    .edit__box {
                                        width: 46%;
                                    }

                                    .pagina {
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                    }

                                    .edit__box .wrapper #form .input {
                                        box-sizing: border-box;
                                        margin: 30px 0px;
                                    }

                                    .mb-5,
                                    .my-5 {
                                        margin-bottom: 0 !important;
                                    }
                                </style>
                                <form autocomplete="off" onsubmit="return false;">
                                    <style>
                                        .form-group {
                                            font-family: Avenir Next, Helvetica Neue, Arial, sans-serif !important;
                                            font-feature-settings: 'kern', 'liga', 'pnum';
                                            -webkit-font-smoothing: antialiased;
                                            position: relative;
                                        }
                                    </style>
                                    <div class="form-group">
                                        <h7 style="font-weight: 700;">Escoje tu repositorio</h7>
                                        <div class="inputy">
                                            <label style="border-right: 1px solid #ddd; padding-right: 15px;"
                                                for="inputrepo"><i class="fab fa-github"></i></label>
                                            <input oninput="updateBtnForNewHosting()" type="text" id="inputrepo"
                                                class="form-control" placeholder="github.com/usuario/repo">
                                            <label for="inputrepo"><i id="dropyIcon"
                                                    class="fas fa-caret-up up"></i></label>
                                        </div>
                                        <div style="z-index: 999;" id="list" class="list-group hide">
                                            {% for i in repos %}
                                            <div onclick="updateRepoValue(this)" class="list-group-item"><i
                                                    class="fas fa-book" style="margin-right: 10px;"></i>{{ i }}</div>
                                            {% endfor %}
                                        </div>
                                        <div class="input">
                                            <label for="mail">
                                                <p>
                                                    Nombre
                                                </p>
                                            </label>
                                            <script>
                                                function changeValueForUnlinkTheGithubRepository(input) {
                                                    input.value = input.value.replace('https://github.com/', 'github.com/');
                                                }
                                            </script>
                                            <input onchange="changeValueForUnlinkTheGithubRepository(this)"
                                                oninput="updateBtnForNewHosting()" placeholder="Nombre del host"
                                                id="hostNombre" type="text">
                                        </div>
                                    </div>
                                    <script>
                                        function updateRepoValue(divyThis) {
                                            document.getElementById("inputrepo").value = "github.com/" + divyThis.textContent;
                                            updateBtnForNewHosting();
                                        }
                                    </script>
                                    <script>

                                        var KEYCODE_ESCAPE = 27;
                                        var KEYCODE_UP = 38;
                                        var KEYCODE_DOWN = 40;

                                        $('#inputrepo').on('focus', function () {

                                            $('#list').removeClass('hide');
                                            $('#dropyIcon').removeClass('up');

                                        }).on('blur', function () {

                                            setTimeout(function () {
                                                $('#list').addClass('hide');
                                            }, 200)
                                            $('#dropyIcon').addClass('up');
                                            $('#list .list-group-item.active').removeClass('active');

                                        }).on('keyup', function (e) {

                                            if (e.keyCode === KEYCODE_DOWN) {

                                                if ($('#list.hide').length > 0) {

                                                    $('#list.hide').removeClass('hide');

                                                } else {

                                                    if ($('#list .list-group-item.active').length > 0) {
                                                        if ($('#list .list-group-item.active').is(':last-child')) {
                                                            $('#list .list-group-item.active').removeClass('active');
                                                            $('#list .list-group-item:first-child').addClass('active');
                                                        } else {
                                                            $('#list .list-group-item.active').removeClass('active').next().addClass('active');
                                                        }
                                                    } else {
                                                        $('#list .list-group-item:first-child').addClass('active');
                                                    }

                                                }

                                            } else if (e.keyCode === KEYCODE_UP) {

                                                if ($('#list.hide').length > 0) {
                                                    $('#list.hide').removeClass('hide');
                                                } else {

                                                    if ($('#list .list-group-item.active').length > 0) {
                                                        if ($('#list .list-group-item.active').is(':first-child')) {
                                                            $('#list .list-group-item.active').removeClass('active');
                                                            $('#list .list-group-item:last-child').addClass('active');
                                                        } else {
                                                            $('#list .list-group-item.active').removeClass('active').prev().addClass('active');
                                                        }
                                                    } else {
                                                        $('#list .list-group-item:last-child').addClass('active');
                                                    }

                                                }

                                            } else if (e.keyCode === KEYCODE_ESCAPE) {
                                                $('#list').addClass('hide');
                                                $('#list .list-group-item.active').removeClass('active');
                                            }
                                        });
                                    </script>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="edit__box">
                <div class="headder">
                    <div class="logo">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="info">
                        <div class="title">
                            Configuraciom
                        </div>
                        <div class="desc">
                            Dale a si si tu projecto usa algo como un .env
                        </div>
                    </div>
                </div>
                <style>
                    .button-cover {
                        height: 100px;
                        width: 200px;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        background-color: #fff;
                        box-shadow: 0 10px 20px -8px #c5d6d6;
                        border-radius: 4px
                    }

                    .lump,
                    .layer {
                        position: absolute;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0
                    }

                    .button {
                        position: relative;
                        width: 74px;
                        height: 36px;
                        overflow: hidden
                    }

                    .button.radius,
                    .button.radius .layer {
                        border-radius: 100px
                    }

                    .button.b2 {
                        border-radius: 2px
                    }

                    .checkbox {
                        position: relative;
                        width: 100%;
                        height: 30px;
                        padding: 0;
                        margin: 0;
                        opacity: 0;
                        cursor: pointer;
                        z-index: 3
                    }

                    .lump {
                        z-index: 2;
                    }

                    .layer {
                        width: 100%;
                        background-color: #ebf7fc;
                        transition: .3s ease all;
                        z-index: 1;
                        height: 30px;
                    }

                    #toggle-button .lump:before {
                        content: '✔️';
                        position: absolute;
                        top: 7px;
                        left: 4px;
                        width: 20px;
                        height: 10px;
                        color: #fff;
                        font-size: 13px;
                        font-weight: 700;
                        text-align: center;
                        line-height: 1;
                        padding: 9px 4px;
                        background-color: #4BB543;
                        display: flex;
                        border-radius: 50%;
                        transition: .3s ease all, left .3s cubic-bezier(0.18, 0.89, 0.35, 1.15);
                        justify-content: center;
                        align-items: center;
                    }

                    #toggle-button .checkbox:active+.lump:before {
                        width: 46px;
                        border-radius: 100px
                    }

                    #toggle-button .checkbox:checked:active+.lump:before {
                        margin-left: -26px
                    }

                    #toggle-button .checkbox:checked+.lump:before {
                        content: '❌';
                        left: 42px;
                        background-color: #F44336
                    }

                    #toggle-button .checkbox:checked~.layer {
                        background-color: #fcebeb
                    }
                </style>
                <script>
                    $(document).ready(function () {
                        var deger = "Evet";
                        $("#sec").on('change', function () {
                            if ($(this).is(':checked')) {
                                deger = "Hayır";
                                document.getElementById("editor").style.display = "none";
                                document.getElementById("nombreArchivoConfig").style.display = "none";
                                $(this).val(deger);
                            }
                            else {
                                deger = "Evet";
                                document.getElementById("editor").style.display = "block";
                                document.getElementById("nombreArchivoConfig").style.display = "block";
                                $(this).val(deger);
                            }
                        });
                    });
                </script>
                <style>
                    #formy .input {
                        background-color: transparent;
                        position: relative;
                        border-bottom: 1px solid rgb(215, 219, 224);
                        border-radius: 0px;
                    }

                    #formy .input {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        padding-bottom: 12px;
                    }

                    #formy .input .info .title {
                        font-size: 16px;
                        font-weight: 700;
                        color: rgb(54, 73, 98);
                        text-align: left;
                        line-height: 1.5;
                        text-transform: none;
                        overflow: unset;
                        white-space: unset;
                        text-overflow: unset;
                    }

                    #formy .input .info .desc {
                        font-size: 16px;
                        font-weight: 500;
                        color: rgb(54, 73, 98);
                        text-align: left;
                        line-height: 1.5;
                        text-transform: none;
                        overflow: unset;
                        white-space: unset;
                        text-overflow: unset;
                    }

                    .center {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        width: 100%;
                        height: 100vh
                    }

                    .button-cover {
                        height: 100px;
                        width: 200px;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        background-color: #fff;
                        box-shadow: 0 10px 20px -8px #c5d6d6;
                        border-radius: 4px
                    }

                    .lump,
                    .layer {
                        position: absolute;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0
                    }

                    .button {
                        position: relative;
                        width: 74px;
                        height: 36px;
                        overflow: hidden
                    }

                    .button.radius,
                    .button.radius .layer {
                        border-radius: 100px
                    }

                    .button.b2 {
                        border-radius: 2px
                    }
                </style>
                <div id="formy" class="wrapper">
                    <div class="input">
                        <div class="info">
                            <div class="title">
                                Configuracion
                            </div>
                            <div class="desc">
                                Tu projecto tiene algun archivo de configuracion? (Puedes cambiarlo despues)
                            </div>
                        </div>
                        <div class="button radius" id="toggle-button">
                            <input type="checkbox" class="checkbox" name="checky" id="sec" value="Evet" checked>
                            <div class="lump"></div>
                            <div class="layer"></div>
                        </div>
                    </div>
                    <style>
                        #editor {
                            position: relative;
                            width: 100%;
                            height: 336px;
                            position: relative;
                            box-shadow: 0 10px 40px rgb(0 0 0 / 16%);
                            display: none;
                            margin-top: 10px;
                        }

                        #nombreArchivoConfig {
                            position: relative;
                            width: 100%;
                            height: 50px;
                            position: relative;
                            box-shadow: 0 10px 40px rgb(0 0 0 / 16%);
                            display: none;
                            margin-top: 10px;
                            outline: none;
                            border: none;
                            padding: 10px;
                        }
                    </style>
                    <input placeholder="NombreDelArchivoSecreto.extension" id="nombreArchivoConfig" type="text" />
                    <div id="editor"></div>
                </div>
            </div>
            <div class="edit__box">
                <div class="headder">
                    <div class="logo">
                        <i class="fas fa-vote-yea"></i>
                    </div>
                    <div class="info">
                        <div class="title">
                            Confirmar
                        </div>
                        <div class="desc">
                            Dale al boton cuando estes listo
                        </div>
                    </div>
                </div>
                <div class="wrapper">
                    <div id="form">
                        <div style="margin: 10px auto;" class="g-recaptcha"
                            data-callback="validateRobotitoCaptchaNewHost" data-sitekey="{{ key }}">
                        </div>
                        <button style="cursor: pointer;" disabled id="btnSubmityHostNew" onclick="createHost()"
                            class="submit">
                            Crear host
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/tippy.js@0.11.3/dist/tippy.min.js"></script>
    <script src="https://unpkg.com/tippy.js@0.11.3/dist/tippy.standalone.js"></script>
    <script src="https://unpkg.com/tippy.js@0.11.3/dist/tippy.js"></script>

    <script src="{{ url_for('static', filename='vendor/notiflix/notiflix-aio-2.7.0.min.js') }}"></script>

    <script>
        new Tippy('#edit')
        new Tippy('#HostUsuario')
        new Tippy('#help')
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"
        integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q=="
        crossorigin="anonymous"></script>
    <script>
        function setEditor() {
            window.eh = ace.edit("editor");
            eh.setTheme("ace/theme/dracula");
            eh.session.setMode("ace/mode/json");
            eh.setOptions({
                fontSize: 20,
                cursorStyle: "wide",
                enableLiveAutocompletion: true,
                enableBasicAutocompletion: true
            })
        }

        setEditor()
    </script>

    <script src="{{ url_for('static', filename='js/account.js') }}"></script>

</body>

</html>