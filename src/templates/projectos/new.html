<!DOCTYPE html>
<html lang="es-ES">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | {{ user["nombre"] }}</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cuenta.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@0.11.3/dist/tippy.css">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/magnific-popup.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min.js"></script>
</head>

<body
    style="display: flex; overflow: hidden; font-family: Avenir Next,Helvetica Neue,Arial,sans-serif!important; font-feature-settings: 'kern','liga','pnum'; -webkit-font-smoothing: antialiased;">
    <style>
        a:hover {
            text-decoration: none;
        }
    </style>
    <div style="position: relative;" class="sideNav">
        <div class="logo">
            <a href="/?r=true">
                <img src="{{ url_for('static', filename='images/favicon.png') }}" alt="LOGO">
            </a>
        </div>
        <ul>
            <a href="/dashboard/host" class="tippy" title="Mira tus hosts" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="HostUsuario"><i
                    style="color: rgb(255, 173, 40); margin-right: 10px;" class="fas fa-cloud-upload-alt"></i> 0 </a>
            <a href="/help" class="tippy" title="Recibir ayuda" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="help"><i class="far fa-life-ring"></i></a>
            <a href="/dashboard/edit" class="tippy" title="Editar perfil" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="edit"><i class="fas fa-cog"></i></a>
            <a href="/dashboard" class="tippy" title="Pagina principal" data-duration="300" data-arrow="false"
                data-animation="shift" data-position="right" id="edit"><i class="fas fa-home"></i></a>
        </ul>
    </div>
    <div class="wrapper__navy">
        <div class="navy">
            <a href="/dashboard/edit" class="acc">
                <div class="pfp">
                    <style>
                        #pfpHolderNavy {
                            background-image: url("{{ user['pfp'] }}");
                            background-size: cover;
                            background-position: center;
                            width: 44px;
                            height: 44px;
                            border-radius: 50%;
                        }
                    </style>
                    <div id="pfpHolderNavy"></div>
                </div>
                <div class="info">
                    <div class="nm">
                        {{ user['nombre'] }}
                    </div>
                    <div class="mail">
                        {{ user['mail'] }}
                    </div>
                </div>
            </a>
        </div>
        <style>
            .pagina {
                margin: 100px 0;
            }
        </style>
        <div class="pagina">
            <div class="edit__box">
                <div class="headder">
                    <div class="logo">
                        <i class="far fa-plus-square"></i>
                    </div>
                    <div class="info">
                        <div class="title">
                            Crear un nuevo host
                        </div>
                        <div class="desc">
                            Create un host rapido y sencillo
                        </div>
                    </div>
                </div>
                <div class="wrapper">
                    <script>
                        const nombre_y_mail = ["{{ user['mail'] }}", "{{ user['nombre'] }}"]
                        const git_name = "{{ info_github['login'] }}"
                    </script>
                    <div id="form">
                        <style>
                            .repoUrl {
                                width: 100%;
                            }
                        </style>
                        <div class="repoUrl">
                            <div class="container my-5">
                                <style>
                                    .hide {
                                        display: none;
                                    }

                                    #list {
                                        overflow-y: auto;
                                        overflow-x: hidden;
                                        text-overflow: ellipsis;
                                        width: 100%;
                                        max-height: 295px;
                                        border: 1px solid #ddd;
                                        border-radius: 10px;
                                        border-top-left-radius: 0;
                                        border-top-right-radius: 0;
                                        position: absolute;
                                        padding: 10px;
                                        background: #fff;
                                    }

                                    #inputrepo {
                                        height: 100%;
                                        padding: 10px 0;
                                        outline: none;
                                        border: none;
                                        width: 500px;
                                    }

                                    #inputrepo:focus {
                                        outline: none !important;
                                        border: none !important;
                                        box-shadow: none !important;
                                    }

                                    .inputy {
                                        border: 1px solid #ddd;
                                        position: relative;
                                        /* justify-content: center; */
                                        /* align-items: center; */
                                        display: grid;
                                        grid-template-columns: auto auto auto;
                                        justify-content: center;
                                        align-items: center;
                                        width: 100%;
                                        margin: 0;
                                    }

                                    .inputy label {
                                        margin: auto 10px;
                                        width: 30px;
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        font-size: 20px;
                                        cursor: pointer;
                                    }

                                    #dropyIcon {
                                        transform: rotate(0deg);
                                    }

                                    #dropyIcon.up {
                                        transform: rotate(180deg);
                                    }

                                    #list::-webkit-scrollbar-track {
                                        background-color: #F5F5F5;
                                    }

                                    #list::-webkit-scrollbar {
                                        width: 12px;
                                        background-color: #F5F5F5;
                                    }

                                    #list::-webkit-scrollbar-thumb {
                                        border-radius: 1px;
                                        background-color: rgb(182, 179, 179);
                                    }

                                    .list-group-item {
                                        border: none;
                                        border-radius: 5px;
                                    }

                                    .list-group-item:hover {
                                        cursor: pointer;
                                        background: #ddd;
                                    }

                                    .edit__box {
                                        width: 46%;
                                    }

                                    .pagina {
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                    }

                                    .edit__box .wrapper #form .input {
                                        box-sizing: border-box;
                                        margin: 30px 0px;
                                    }

                                    .mb-5, .my-5 {
                                        margin-bottom: 0 !important;
                                    }
                                </style>
                                <form autocomplete="off" onsubmit="return false;">
                                    <style>
                                        .form-group {
                                            font-family: Avenir Next, Helvetica Neue, Arial, sans-serif !important;
                                            font-feature-settings: 'kern', 'liga', 'pnum';
                                            -webkit-font-smoothing: antialiased;
                                            position: relative;
                                        }
                                    </style>
                                    <div class="form-group">
                                        <h7 style="font-weight: 700;">Escoje tu repositorio</h7>
                                        <div class="inputy">
                                            <label style="border-right: 1px solid #ddd; padding-right: 15px;" for="inputrepo"><i
                                                    class="fab fa-github"></i></label>
                                            <input oninput="updateBtnForNewHosting()" type="text" id="inputrepo" class="form-control"
                                                placeholder="github.com/usuario/repo">
                                            <label for="inputrepo"><i id="dropyIcon"
                                                    class="fas fa-caret-up up"></i></label>
                                        </div>
                                        <div style="z-index: 999;" id="list" class="list-group hide">
                                            {% for i in repos %}
                                            <div onclick="updateRepoValue(this)" class="list-group-item"><i
                                                    class="fas fa-book" style="margin-right: 10px;"></i>{{ i }}</div>
                                            {% endfor %}
                                        </div>
                                        <div class="input">
                                            <label for="mail">
                                                <p>
                                                    Nombre
                                                </p>
                                            </label>
                                            <input oninput="updateBtnForNewHosting()" placeholder="Nombre del host" id="hostNombre" type="text">
                                        </div>
                                        <button disabled id="btnSubmityHostNew" onclick="createHost()" class="submit">
                                            Crear host
                                        </button>
                                    </div>
                                    <script>
                                        function updateRepoValue(divyThis) {
                                            document.getElementById("inputrepo").value = "github.com/" + divyThis.textContent;
                                            updateBtnForNewHosting();
                                        }
                                    </script>
                                    <script>

                                        var KEYCODE_ESCAPE = 27;
                                        var KEYCODE_UP = 38;
                                        var KEYCODE_DOWN = 40;

                                        $('#inputrepo').on('focus', function () {

                                            $('#list').removeClass('hide');
                                            $('#dropyIcon').removeClass('up');

                                        }).on('blur', function () {

                                            setTimeout(function () {
                                                $('#list').addClass('hide');
                                            }, 200)
                                            $('#dropyIcon').addClass('up');
                                            $('#list .list-group-item.active').removeClass('active');

                                        }).on('keyup', function (e) {

                                            if (e.keyCode === KEYCODE_DOWN) {

                                                if ($('#list.hide').length > 0) {

                                                    $('#list.hide').removeClass('hide');

                                                } else {

                                                    if ($('#list .list-group-item.active').length > 0) {
                                                        if ($('#list .list-group-item.active').is(':last-child')) {
                                                            $('#list .list-group-item.active').removeClass('active');
                                                            $('#list .list-group-item:first-child').addClass('active');
                                                        } else {
                                                            $('#list .list-group-item.active').removeClass('active').next().addClass('active');
                                                        }
                                                    } else {
                                                        $('#list .list-group-item:first-child').addClass('active');
                                                    }

                                                }

                                            } else if (e.keyCode === KEYCODE_UP) {

                                                if ($('#list.hide').length > 0) {
                                                    $('#list.hide').removeClass('hide');
                                                } else {

                                                    if ($('#list .list-group-item.active').length > 0) {
                                                        if ($('#list .list-group-item.active').is(':first-child')) {
                                                            $('#list .list-group-item.active').removeClass('active');
                                                            $('#list .list-group-item:last-child').addClass('active');
                                                        } else {
                                                            $('#list .list-group-item.active').removeClass('active').prev().addClass('active');
                                                        }
                                                    } else {
                                                        $('#list .list-group-item:last-child').addClass('active');
                                                    }

                                                }

                                            } else if (e.keyCode === KEYCODE_ESCAPE) {
                                                $('#list').addClass('hide');
                                                $('#list .list-group-item.active').removeClass('active');
                                            }
                                        });
                                    </script>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/tippy.js@0.11.3/dist/tippy.min.js"></script>
    <script src="https://unpkg.com/tippy.js@0.11.3/dist/tippy.standalone.js"></script>
    <script src="https://unpkg.com/tippy.js@0.11.3/dist/tippy.js"></script>

    <script>
        new Tippy('#edit')
        new Tippy('#HostUsuario')
        new Tippy('#help')
    </script>

    <script src="{{ url_for('static', filename='js/account.js') }}"></script>

</body>

</html>